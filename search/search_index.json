{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Overview Soluble Fusion performs security assessments of Terraform and CloudFormation in development so that you can identify and fix cloud security issues prior to deployment. Soluble Fusion integrates with your Git hosting provider (GitHub, GitLab, etc.) to automatically perfom these security assessments. As commits are pushed and pull requests are opened, Soluble Fusion receives webhooks from your Git provider and schedules security assessments. The results of those assessments are posted back to your Git hosting provider's pull-request mechanism so that everyone commiting code has clear and actionable feeedback on the porblems that are introduced. Infrastructure-as-Code The widespread adoption of declarative infrastructure with Terraform, CloudFormation, and Kubernetes has created a new opportunity for configuration issues to enter cloud environemnts. Infrastructure-as-Code (IaC) has replaced \"ClickOps\" as the dominant method for infrastructure management. While this is a uniformly postiive step forward in modern software delivery, it has createed a few complications. Console is Obvious, IaC Not So Much Configuration choices are very obvious in the console. It is hard to miss encryption at rest settings in the AWS console. By contrast, when authoriing Terraform or CloudFormation, you are often looking at a blank editor. There are no options that are obvious. As a result, it is very easy to miss critical configuration settings. Automated checking and fast feedback is required. Code Review Reviewing Terraform and Cloudformation manually is much more difficult than reviewing application code. If code review is done at all, few people enjoy it. The result is predicatble: LGTM , even if the proposed change is...not good. Code review needs to be automated. Other Assessment Capabilities Although infrastructure-as-code is our primary focus, we are expanding our capabilities into related areas as well. If it can be assessessed in a CI environment, we are working on automating it. Container Image Scanning Using Trivy, Fusion enables you to scan container images and report the results to our SaaS platform. Secrets Detection Using a combination of expressions to look for common secret formats (AWS security keys, etc), contextual checks, and checks for shannon entropy, the platform will identify and report on secrets that may have been mistakenly committed to source control. App Dependency Checks We support application dependency checks for the following: Javascript - using Trivy and RetireJs. Python - using Trivy Java - OWASP Dependency Check We are in the process adding support for integrating commercial component analysis tools as well. Get Started Enough Talk. Let's get started. Getting Started Command Line Interface","title":"Home"},{"location":"#overview","text":"Soluble Fusion performs security assessments of Terraform and CloudFormation in development so that you can identify and fix cloud security issues prior to deployment. Soluble Fusion integrates with your Git hosting provider (GitHub, GitLab, etc.) to automatically perfom these security assessments. As commits are pushed and pull requests are opened, Soluble Fusion receives webhooks from your Git provider and schedules security assessments. The results of those assessments are posted back to your Git hosting provider's pull-request mechanism so that everyone commiting code has clear and actionable feeedback on the porblems that are introduced.","title":"Overview"},{"location":"#infrastructure-as-code","text":"The widespread adoption of declarative infrastructure with Terraform, CloudFormation, and Kubernetes has created a new opportunity for configuration issues to enter cloud environemnts. Infrastructure-as-Code (IaC) has replaced \"ClickOps\" as the dominant method for infrastructure management. While this is a uniformly postiive step forward in modern software delivery, it has createed a few complications.","title":"Infrastructure-as-Code"},{"location":"#console-is-obvious-iac-not-so-much","text":"Configuration choices are very obvious in the console. It is hard to miss encryption at rest settings in the AWS console. By contrast, when authoriing Terraform or CloudFormation, you are often looking at a blank editor. There are no options that are obvious. As a result, it is very easy to miss critical configuration settings. Automated checking and fast feedback is required.","title":"Console is Obvious, IaC Not So Much"},{"location":"#code-review","text":"Reviewing Terraform and Cloudformation manually is much more difficult than reviewing application code. If code review is done at all, few people enjoy it. The result is predicatble: LGTM , even if the proposed change is...not good. Code review needs to be automated.","title":"Code Review"},{"location":"#other-assessment-capabilities","text":"Although infrastructure-as-code is our primary focus, we are expanding our capabilities into related areas as well. If it can be assessessed in a CI environment, we are working on automating it.","title":"Other Assessment Capabilities"},{"location":"#container-image-scanning","text":"Using Trivy, Fusion enables you to scan container images and report the results to our SaaS platform.","title":"Container Image Scanning"},{"location":"#secrets-detection","text":"Using a combination of expressions to look for common secret formats (AWS security keys, etc), contextual checks, and checks for shannon entropy, the platform will identify and report on secrets that may have been mistakenly committed to source control.","title":"Secrets Detection"},{"location":"#app-dependency-checks","text":"We support application dependency checks for the following: Javascript - using Trivy and RetireJs. Python - using Trivy Java - OWASP Dependency Check We are in the process adding support for integrating commercial component analysis tools as well.","title":"App Dependency Checks"},{"location":"#get-started","text":"Enough Talk. Let's get started. Getting Started Command Line Interface","title":"Get Started"},{"location":"assessments/","text":"Security Assessments Soluble Fusion is a dev-friendly platform that allows your to perform security assessments against a variet of modern DevOps-oriented compnents including: Infrastructure-as-Code Terraform AWS CloudFormation Kubernetes manifests Container Images Secrets detection in source code Dependency analysis for Python, Node, and Java platforms Cloud security posture management checks of your AWS Runtime and more... Soluble runs these assessments locally in your development environemnt or in CI. You can, optionally, send the results of these assessments to our SaaS platform for reporting, ticketing, prioritization and notification. If you have an existing investment in the best open-source assessment tools, we let you leverage that investment and build an operationalized security program around them. We give you flexibility to run one or more of such tools of your choice, to provide maximum security coverage of your infrastructure and to give you freedom from vendor lock-in. If you want us to integrate with any other tools or solutions, please let us know by emailing the support . How It Works The soluble CLI takes care of downloading the underlying assessment tool and executing it for you. We then take the assessment results and send it to our SaaS platform along with contextual inforamtion about the asessments such as the git repository, branch, commit, and CI pipline in which it was executed. For assessment tools that offer a static binary distribution, such as those written in Golang, the CLI will obtain the asssessment tool from the upstream distribution point, typically, GitHub Release. For assessments that have complex dependencies that complicate installation (Node, Python, Ruby, etc) we use a containerized version of the tool to make it easier to manage. If you don't have Docker available and wish to install the underlying tool natively yourself, you can do that with the --tool-path <tool> option. If you omit that option, Docker will be used. We do not send your data to our SaaS platform. In some cases, the assessment tools will send snippits of source fragments (Secrets detection does not!), but we do not send anything more than that. Once the assessment has been sent to the SaaS platform, it can be viewed in the web UI, and is availble for integraiton with alert management, JIRA ticketing an Slack notification. Prerequisites You should have the Soluble CLI installed and a Soluble Fusion authentication token. Instructions for this can be found on the CLI Configuration Guide . Infrastructure-as-Code In all of the examples below, the --uplaod option is optional. If you specify it and you have an API token configured for your CLI, the results will be sent to Soluble Fusion. CloudFormation Checkov Checkov is one of the better infrastructure-as-code asessment tools. It is written in Python, is easily extensible, and has support CloudFormation, Terrafrom and Kubernetes. To run an assesmsent of your cloudformation by running the following: soluble cfn-scan checkov --upload cfn-python-lint cfn-lint is a popular commmunity OSS tool sponsored in part by AWS. soluble cfn-scan cfn-pyhton-lint --upload cfn-nag cfn-nag is an assessment tool originally written by employees of Stelligent. soluble cfn-scan cfn-nag --upload Terraform Checkov As mentioned above, checkov supports Terraform as well. soluble tf-scan checkov --upload TFSec tfsec is an independently-developed OSS assessment tool for Terrafrom. soluble tf-scan tfsec --upload Terrascan soluble tf-scan terrascan --upload Hashicorp Sentinel We are exploring integration with Hashicorp Sentinel . Let us know if you are interested. Other Let us know if there are other flavors of infrastructure-as-code that you would like to integrate. We are considering Ansible, Chef, Puppet, Pulumi and others. Kubernetes To scan a source tree of kubernetes manifests, run the following: soluble k8s-scan --upload At present we only offer checkov support for kubernetes. If you would like to see another asseement tool (there are many!), please let us know. Container Image Scanning Trivy Soluble provides a simple and comprehensive vulnerability scanner for containers and other artifacts based on Trivy . To scan a container image: soluble image-scan <image> [--upload] Other Let us know if there are other image scanning tools that you would like us to support. We have AWS ECR and AWS GCR available, but they are not fully integrated into the CLI. We are happy to provide native support for Clair, Anchore, etc if there is interest. Secrets Detection The Soluble secrets scanner searches through git repositories for secrets. The underlying implementation uses Detect Secrets from Yelp. Plugging this CLI service into the CI provides an easy way to prevent accidental check-in of secrets. soluble secrets-scan [--upload] If there is interest in other secrets detecton engines ( Trufflehog , Shhhgit , etc.) we would be happy to add support. Application Dependency Scanning Python and Node via Trivy Trivy can be used to scan your Python and Node applications for depedencies with vulnerabilities. soluble dep-scan trivy --upload OWASP Dependency Check for JVM Apps If you use OWASP Dependency Check for java applications, you can send the JSON output to Soluble. If you are using Gradle and have the Dependency Check plugin installed, run: gradle dependencyCheckAnalyze This will produce a report in build/reports/dependency-check-report.json You can then send the report to Soluble with: soluble post -m owasp -f build/reports/dependency-check-report.json Note: We are happy to create a wrapper plugin if there is interest. Retire JS We have retirejs support coming to the CLI. Dependabot We are actively looking into integrating GitHub Dependabot into Soluble Fusion. We like Dependabot a lot and use it ourselves. Let us know if you are interested. Infrastructure Scanning Cloudsploit Cloudsploit is a great cloud security scanner from Aqua Security. Cloudsploit supports AWS, GCP, Azure and even Oracle cloud. Soluble has packaged clousdploit as a container image that can be run via Docker or Kubernetes. Run via Docker Note: We are in the process of wrapping this invocation into our CLI to make it less clumsy. However, it is just syntactic sugar to make the tools easier to use. Under the hood it will invoke Cloudsploit as follows. Assuming the soluble CLI is configured and you have AWS credentials in environment variables, run the following: docker run -it --rm \\ -e AWS_ACCESS_KEY_ID \\ -e AWS_SECRET_ACCESS_KEY \\ -e AWS_SESSION_TOKEN \\ -v ${HOME}/.soluble:/app/.soluble \\ gcr.io/soluble-repo/soluble-cloudsploit If your AWS configuration is in ~/.aws , the following will work as well: docker run -it --rm \\ -v ${HOME}/.aws:/app/.aws \\ -v ${HOME}/.soluble:/app/.soluble \\ gcr.io/soluble-repo/soluble-cloudsploit Cloudsploit can take a while to run. When it has completed, it will send the results to Soluble Fusion . Run via Kubernetes The following job template will run cloudsploit and send the results to Soluble Fusion. apiVersion: batch/v1 kind: Job metadata: generateName: cloudsploit- spec: template: spec: containers: - image: gcr.io/soluble-repo/soluble-cloudsploit:latest name: cloudsploit imagePullPolicy: Always env: - name: AWS_ACCESS_KEY_ID value: \"\" - name: AWS_SECRET_ACCESS_KEY value: \"\" - name: AWS_SESSION_TOKEN value: \"\" - name: SOLUBLE_API_TOKEN value: \"\" restartPolicy: Never The example above is meant for illustrative purposes only. You should consider using kubernetes secrets or use integrated IAM provide credentials to cloudsploit. Have Soluble Fusion Run It For You Soluble Fusion can execute cloudsploit for you automatically if you delegate the AWS Security Audit role to Soluble. In this case we well schedule cloudsploit for you and feed assessments into Fusion. Prowler We have support for Prowler as well. IAM Assessment We are working on automating AWS and Kubernetes IAM assessments to help make everyone's least-privileged dreams come true. We'd appreciate it if you would let us know if you have specific interest in this.","title":"Security Assessments"},{"location":"assessments/#security-assessments","text":"Soluble Fusion is a dev-friendly platform that allows your to perform security assessments against a variet of modern DevOps-oriented compnents including: Infrastructure-as-Code Terraform AWS CloudFormation Kubernetes manifests Container Images Secrets detection in source code Dependency analysis for Python, Node, and Java platforms Cloud security posture management checks of your AWS Runtime and more... Soluble runs these assessments locally in your development environemnt or in CI. You can, optionally, send the results of these assessments to our SaaS platform for reporting, ticketing, prioritization and notification. If you have an existing investment in the best open-source assessment tools, we let you leverage that investment and build an operationalized security program around them. We give you flexibility to run one or more of such tools of your choice, to provide maximum security coverage of your infrastructure and to give you freedom from vendor lock-in. If you want us to integrate with any other tools or solutions, please let us know by emailing the support .","title":"Security Assessments"},{"location":"assessments/#how-it-works","text":"The soluble CLI takes care of downloading the underlying assessment tool and executing it for you. We then take the assessment results and send it to our SaaS platform along with contextual inforamtion about the asessments such as the git repository, branch, commit, and CI pipline in which it was executed. For assessment tools that offer a static binary distribution, such as those written in Golang, the CLI will obtain the asssessment tool from the upstream distribution point, typically, GitHub Release. For assessments that have complex dependencies that complicate installation (Node, Python, Ruby, etc) we use a containerized version of the tool to make it easier to manage. If you don't have Docker available and wish to install the underlying tool natively yourself, you can do that with the --tool-path <tool> option. If you omit that option, Docker will be used. We do not send your data to our SaaS platform. In some cases, the assessment tools will send snippits of source fragments (Secrets detection does not!), but we do not send anything more than that. Once the assessment has been sent to the SaaS platform, it can be viewed in the web UI, and is availble for integraiton with alert management, JIRA ticketing an Slack notification.","title":"How It Works"},{"location":"assessments/#prerequisites","text":"You should have the Soluble CLI installed and a Soluble Fusion authentication token. Instructions for this can be found on the CLI Configuration Guide .","title":"Prerequisites"},{"location":"assessments/#infrastructure-as-code","text":"In all of the examples below, the --uplaod option is optional. If you specify it and you have an API token configured for your CLI, the results will be sent to Soluble Fusion.","title":"Infrastructure-as-Code"},{"location":"assessments/#cloudformation","text":"","title":"CloudFormation"},{"location":"assessments/#checkov","text":"Checkov is one of the better infrastructure-as-code asessment tools. It is written in Python, is easily extensible, and has support CloudFormation, Terrafrom and Kubernetes. To run an assesmsent of your cloudformation by running the following: soluble cfn-scan checkov --upload","title":"Checkov"},{"location":"assessments/#cfn-python-lint","text":"cfn-lint is a popular commmunity OSS tool sponsored in part by AWS. soluble cfn-scan cfn-pyhton-lint --upload","title":"cfn-python-lint"},{"location":"assessments/#cfn-nag","text":"cfn-nag is an assessment tool originally written by employees of Stelligent. soluble cfn-scan cfn-nag --upload","title":"cfn-nag"},{"location":"assessments/#terraform","text":"","title":"Terraform"},{"location":"assessments/#checkov_1","text":"As mentioned above, checkov supports Terraform as well. soluble tf-scan checkov --upload","title":"Checkov"},{"location":"assessments/#tfsec","text":"tfsec is an independently-developed OSS assessment tool for Terrafrom. soluble tf-scan tfsec --upload","title":"TFSec"},{"location":"assessments/#terrascan","text":"soluble tf-scan terrascan --upload","title":"Terrascan"},{"location":"assessments/#hashicorp-sentinel","text":"We are exploring integration with Hashicorp Sentinel . Let us know if you are interested.","title":"Hashicorp Sentinel"},{"location":"assessments/#other","text":"Let us know if there are other flavors of infrastructure-as-code that you would like to integrate. We are considering Ansible, Chef, Puppet, Pulumi and others.","title":"Other"},{"location":"assessments/#kubernetes","text":"To scan a source tree of kubernetes manifests, run the following: soluble k8s-scan --upload At present we only offer checkov support for kubernetes. If you would like to see another asseement tool (there are many!), please let us know.","title":"Kubernetes"},{"location":"assessments/#container-image-scanning","text":"","title":"Container Image Scanning"},{"location":"assessments/#trivy","text":"Soluble provides a simple and comprehensive vulnerability scanner for containers and other artifacts based on Trivy . To scan a container image: soluble image-scan <image> [--upload]","title":"Trivy"},{"location":"assessments/#other_1","text":"Let us know if there are other image scanning tools that you would like us to support. We have AWS ECR and AWS GCR available, but they are not fully integrated into the CLI. We are happy to provide native support for Clair, Anchore, etc if there is interest.","title":"Other"},{"location":"assessments/#secrets-detection","text":"The Soluble secrets scanner searches through git repositories for secrets. The underlying implementation uses Detect Secrets from Yelp. Plugging this CLI service into the CI provides an easy way to prevent accidental check-in of secrets. soluble secrets-scan [--upload] If there is interest in other secrets detecton engines ( Trufflehog , Shhhgit , etc.) we would be happy to add support.","title":"Secrets Detection"},{"location":"assessments/#application-dependency-scanning","text":"","title":"Application Dependency Scanning"},{"location":"assessments/#python-and-node-via-trivy","text":"Trivy can be used to scan your Python and Node applications for depedencies with vulnerabilities. soluble dep-scan trivy --upload","title":"Python and Node via Trivy"},{"location":"assessments/#owasp-dependency-check-for-jvm-apps","text":"If you use OWASP Dependency Check for java applications, you can send the JSON output to Soluble. If you are using Gradle and have the Dependency Check plugin installed, run: gradle dependencyCheckAnalyze This will produce a report in build/reports/dependency-check-report.json You can then send the report to Soluble with: soluble post -m owasp -f build/reports/dependency-check-report.json Note: We are happy to create a wrapper plugin if there is interest.","title":"OWASP Dependency Check for JVM Apps"},{"location":"assessments/#retire-js","text":"We have retirejs support coming to the CLI.","title":"Retire JS"},{"location":"assessments/#dependabot","text":"We are actively looking into integrating GitHub Dependabot into Soluble Fusion. We like Dependabot a lot and use it ourselves. Let us know if you are interested.","title":"Dependabot"},{"location":"assessments/#infrastructure-scanning","text":"","title":"Infrastructure Scanning"},{"location":"assessments/#cloudsploit","text":"Cloudsploit is a great cloud security scanner from Aqua Security. Cloudsploit supports AWS, GCP, Azure and even Oracle cloud. Soluble has packaged clousdploit as a container image that can be run via Docker or Kubernetes.","title":"Cloudsploit"},{"location":"assessments/#run-via-docker","text":"Note: We are in the process of wrapping this invocation into our CLI to make it less clumsy. However, it is just syntactic sugar to make the tools easier to use. Under the hood it will invoke Cloudsploit as follows. Assuming the soluble CLI is configured and you have AWS credentials in environment variables, run the following: docker run -it --rm \\ -e AWS_ACCESS_KEY_ID \\ -e AWS_SECRET_ACCESS_KEY \\ -e AWS_SESSION_TOKEN \\ -v ${HOME}/.soluble:/app/.soluble \\ gcr.io/soluble-repo/soluble-cloudsploit If your AWS configuration is in ~/.aws , the following will work as well: docker run -it --rm \\ -v ${HOME}/.aws:/app/.aws \\ -v ${HOME}/.soluble:/app/.soluble \\ gcr.io/soluble-repo/soluble-cloudsploit Cloudsploit can take a while to run. When it has completed, it will send the results to Soluble Fusion .","title":"Run via Docker"},{"location":"assessments/#run-via-kubernetes","text":"The following job template will run cloudsploit and send the results to Soluble Fusion. apiVersion: batch/v1 kind: Job metadata: generateName: cloudsploit- spec: template: spec: containers: - image: gcr.io/soluble-repo/soluble-cloudsploit:latest name: cloudsploit imagePullPolicy: Always env: - name: AWS_ACCESS_KEY_ID value: \"\" - name: AWS_SECRET_ACCESS_KEY value: \"\" - name: AWS_SESSION_TOKEN value: \"\" - name: SOLUBLE_API_TOKEN value: \"\" restartPolicy: Never The example above is meant for illustrative purposes only. You should consider using kubernetes secrets or use integrated IAM provide credentials to cloudsploit.","title":"Run via Kubernetes"},{"location":"assessments/#have-soluble-fusion-run-it-for-you","text":"Soluble Fusion can execute cloudsploit for you automatically if you delegate the AWS Security Audit role to Soluble. In this case we well schedule cloudsploit for you and feed assessments into Fusion.","title":"Have Soluble Fusion Run It For You"},{"location":"assessments/#prowler","text":"We have support for Prowler as well.","title":"Prowler"},{"location":"assessments/#iam-assessment","text":"We are working on automating AWS and Kubernetes IAM assessments to help make everyone's least-privileged dreams come true. We'd appreciate it if you would let us know if you have specific interest in this.","title":"IAM Assessment"},{"location":"ci/","text":"CI/CD Integrating tools into CI/CD pipelines can be a difficult and time-consuming job. If you are focused on a singular goal of getting your app to build, test and deploy, it is typically not so hard. However when you find yourself in a position of needing to integrate security tools, the idea of making even a one-line change to your config can be daunting. We are addressing this by providing a Kubernetes-based CI system purposed-built for running Security tools. Zodiac enables security tools to be run entirely in parallel with no friction with the development team. Zodiac Zodiac is the component that enables the autiomation assessments. You read more about it in the Getting Started Guide . Manual Integration This section describes how to integrate Soluble with your CI/CD platform by making changes to the job configuration. Before you go forward with this approach, please make sure that you have read through the Zodiac section first. For most CI environments, the easiest way to install the soluble CLI is to add it to the build job itself. The following command will download and install the CLI on demand. curl -sL https://raw.githubusercontent.com/soluble-ai/soluble-cli/master/linux-install.sh | sh The CLI will be installed in the current directory with the execute bit set. You are welcome to move it somewhere else, but leaving it in the current directory, which should be the checked-out source tree for most CI systems. There are two important environment variables that you should have set: SOLUBLE_API_TOKEN and SOLUBLE_ORG_ID prior to installatin. If they are set at the time the installation script is run, then the file $HOME/.soluble/cli-config.json will be written automatically. You can find these values in from your own ${HOME}/.soluble/cli-config.json that is created when you run soluble login . Note: If you would rather store and distribute ${HOME}/.soluble/cli-config.json yourself, via Secrets Manager or S3 or another mechanism you are free to do so. Failing Builds You can add --fail SEVERITY=THRESHOLD_COUNT for each assessment that you run. If you add --fail high=1 then the build fill fail if more than one High finding is detected. Note that a critical finding will also trigger this failure. The order of finding severity is critical > high > medium > low > info . Note that the --fail flag only works with --upload because the finding severity is provided by Soluble Fusion, not the assessment tool. Failing At End If you are running multiple assessments in a single build job, you might not want to fail at the first assessment. This will prevent subsequent assessments from even running, since the CI platform will terminate execution with a command with a non-zero exit code. So if you would rather fail at the end, add the following: soluble build report --fail high=1 at the end of the build job. This will allow all the previous assessments to be run and reported before triggering a failure. GitHub PR Status Soluble can update GitHUb PR Status Checks if you call soluble update-pr . For this to work, you need to have installed the Soluble GitHub App which enables the CLI to receive github API credentials to post status checks. To do this, while logged in to Soluble, run the following visit the following in your web browser. https://github.com/apps/soluble-fusion . CI Providers Circle CI The following is an example for Circle CI with inline comments. version: 2.1 workflows: workflow: jobs: - build: # my-env-context is a CircleCI Build Context containing SOLUBLE_API_TOKEN and SOLUBLE_ORG_ID # Circle CI contexts are documented here: https://circleci.com/docs/2.0/contexts/ context: my-env-context jobs: build: machine: # Need to use machine image builders if you intend to use checkov and other assessment tools via docker. # Circle CI builders, by default, do not have docker available to build steps. If you don't have docker available # then you have to manually install assessment tools, which is cumbersome. So using machine image builder # is reccommended. Circle CI documenation is here: https://circleci.com/docs/2.0/executor-intro/ image: ubuntu-1604:202010-01 steps: - checkout # # # Install the CLI, using the values of SOLUBLE_API_TOKEN and SOLUBLE_ORG_ID. Those values are written to # ~/.soluble/cli-config.json - run: \"curl -sL https://raw.githubusercontent.com/soluble-ai/soluble-cli/master/linux-install.sh | sh\" # # # Run tfsec on the files in path/to/terraform/files and upload the results to Soluble Fusion. Will continue # on error, which is probably what you want with multiple assessments. If you want to fail fast on error, add # --fail high=1, which would return a non-zero exit code if there are 1 or more HIGH or CRITICAL errors found. - run: \"soluble tf-scan tfsec -d path/to/terraform/files --upload\" # # Run checkov on path/to/terraform/files and uplaod the results to Soluble Fusion. - run: \"soluble tf-scan checkov -d path/to/terraform/files --upload\" # # Run a secrets scan on the source tree - run: \"soluble secrets-scan --upload\" # Produce a consolidated assessment summary and fail if there are one or more findings in any of the above # assessments. - run: \"soluble build report --fail high=1 An important point with Circle CI is that by default the builders do not have Docker available in build steps. The Soluble CLI prefers to use container image distributions of tools which have complicated depenencies such as checkov. So you should use the machine image option. If you prefer not to do this and are happy to install and maintain checkov and other tools yourself, you can pass --tool-path as an argument to each soluble command. For example, --tool-path checkov would use the checkov available on your PATH. Kubernetes-based CI/CD Kubernetes-based CI/CD platforms such as Tekton, Drone, etc. will typically not have Docker available. In this case you will need to have the tools pre-installed in the container image that you are using for the build execution and use the --tool-path option described above.","title":"CI/CD"},{"location":"ci/#cicd","text":"Integrating tools into CI/CD pipelines can be a difficult and time-consuming job. If you are focused on a singular goal of getting your app to build, test and deploy, it is typically not so hard. However when you find yourself in a position of needing to integrate security tools, the idea of making even a one-line change to your config can be daunting. We are addressing this by providing a Kubernetes-based CI system purposed-built for running Security tools. Zodiac enables security tools to be run entirely in parallel with no friction with the development team.","title":"CI/CD"},{"location":"ci/#zodiac","text":"Zodiac is the component that enables the autiomation assessments. You read more about it in the Getting Started Guide .","title":"Zodiac"},{"location":"ci/#manual-integration","text":"This section describes how to integrate Soluble with your CI/CD platform by making changes to the job configuration. Before you go forward with this approach, please make sure that you have read through the Zodiac section first. For most CI environments, the easiest way to install the soluble CLI is to add it to the build job itself. The following command will download and install the CLI on demand. curl -sL https://raw.githubusercontent.com/soluble-ai/soluble-cli/master/linux-install.sh | sh The CLI will be installed in the current directory with the execute bit set. You are welcome to move it somewhere else, but leaving it in the current directory, which should be the checked-out source tree for most CI systems. There are two important environment variables that you should have set: SOLUBLE_API_TOKEN and SOLUBLE_ORG_ID prior to installatin. If they are set at the time the installation script is run, then the file $HOME/.soluble/cli-config.json will be written automatically. You can find these values in from your own ${HOME}/.soluble/cli-config.json that is created when you run soluble login . Note: If you would rather store and distribute ${HOME}/.soluble/cli-config.json yourself, via Secrets Manager or S3 or another mechanism you are free to do so.","title":"Manual Integration"},{"location":"ci/#failing-builds","text":"You can add --fail SEVERITY=THRESHOLD_COUNT for each assessment that you run. If you add --fail high=1 then the build fill fail if more than one High finding is detected. Note that a critical finding will also trigger this failure. The order of finding severity is critical > high > medium > low > info . Note that the --fail flag only works with --upload because the finding severity is provided by Soluble Fusion, not the assessment tool.","title":"Failing Builds"},{"location":"ci/#failing-at-end","text":"If you are running multiple assessments in a single build job, you might not want to fail at the first assessment. This will prevent subsequent assessments from even running, since the CI platform will terminate execution with a command with a non-zero exit code. So if you would rather fail at the end, add the following: soluble build report --fail high=1 at the end of the build job. This will allow all the previous assessments to be run and reported before triggering a failure.","title":"Failing At End"},{"location":"ci/#github-pr-status","text":"Soluble can update GitHUb PR Status Checks if you call soluble update-pr . For this to work, you need to have installed the Soluble GitHub App which enables the CLI to receive github API credentials to post status checks. To do this, while logged in to Soluble, run the following visit the following in your web browser. https://github.com/apps/soluble-fusion .","title":"GitHub PR Status"},{"location":"ci/#ci-providers","text":"","title":"CI Providers"},{"location":"ci/#circle-ci","text":"The following is an example for Circle CI with inline comments. version: 2.1 workflows: workflow: jobs: - build: # my-env-context is a CircleCI Build Context containing SOLUBLE_API_TOKEN and SOLUBLE_ORG_ID # Circle CI contexts are documented here: https://circleci.com/docs/2.0/contexts/ context: my-env-context jobs: build: machine: # Need to use machine image builders if you intend to use checkov and other assessment tools via docker. # Circle CI builders, by default, do not have docker available to build steps. If you don't have docker available # then you have to manually install assessment tools, which is cumbersome. So using machine image builder # is reccommended. Circle CI documenation is here: https://circleci.com/docs/2.0/executor-intro/ image: ubuntu-1604:202010-01 steps: - checkout # # # Install the CLI, using the values of SOLUBLE_API_TOKEN and SOLUBLE_ORG_ID. Those values are written to # ~/.soluble/cli-config.json - run: \"curl -sL https://raw.githubusercontent.com/soluble-ai/soluble-cli/master/linux-install.sh | sh\" # # # Run tfsec on the files in path/to/terraform/files and upload the results to Soluble Fusion. Will continue # on error, which is probably what you want with multiple assessments. If you want to fail fast on error, add # --fail high=1, which would return a non-zero exit code if there are 1 or more HIGH or CRITICAL errors found. - run: \"soluble tf-scan tfsec -d path/to/terraform/files --upload\" # # Run checkov on path/to/terraform/files and uplaod the results to Soluble Fusion. - run: \"soluble tf-scan checkov -d path/to/terraform/files --upload\" # # Run a secrets scan on the source tree - run: \"soluble secrets-scan --upload\" # Produce a consolidated assessment summary and fail if there are one or more findings in any of the above # assessments. - run: \"soluble build report --fail high=1 An important point with Circle CI is that by default the builders do not have Docker available in build steps. The Soluble CLI prefers to use container image distributions of tools which have complicated depenencies such as checkov. So you should use the machine image option. If you prefer not to do this and are happy to install and maintain checkov and other tools yourself, you can pass --tool-path as an argument to each soluble command. For example, --tool-path checkov would use the checkov available on your PATH.","title":"Circle CI"},{"location":"ci/#kubernetes-based-cicd","text":"Kubernetes-based CI/CD platforms such as Tekton, Drone, etc. will typically not have Docker available. In this case you will need to have the tools pre-installed in the container image that you are using for the build execution and use the --tool-path option described above.","title":"Kubernetes-based CI/CD"},{"location":"cinderellas/","text":"Cinderella clusters Soluble Cinderella clusters provide a quick, easy way to explore the kubernetes ecosystem. Create a cluster, deploy containers, and test different configurations. Cinderella clusters are automatically deleted when their times run out. Try Cinderella You won\u2019t have to do this every time you start a Cinderella cluster. Click on the link Click on \"Let's go!\" to get started. Next we need to import one (or more) SSH public keys so we can log in to the node running the cluster. If you have a GitHub account with SSH public keys, Soluble can just import those. That\u2019s what we\u2019ll do here: After clicking on Add , the keys are imported, and we\u2019re taken to the loading page. It takes about a minute for the cluster to spin up. When the cluster is ready, you\u2019ll receive a notification in the upper right corner. When you click Continue , you\u2019ll be taken to the Cinderella Clusters page: Next, we\u2019ll log in to the node running the cluster via SSH. To make this easy, we can copy the SSH command to log in to the node by clicking on the three vertical dots in the Actions column of the row with our Cinderella cluster: Next, open a terminal window, paste the command you copied at the prompt, and hit return. We\u2019ll be asked to confirm the SSH key of the remote host and will get a prompt that looks something like: Run the kubectl command and explore the cluster.","title":"Cinderella clusters"},{"location":"cinderellas/#cinderella-clusters","text":"Soluble Cinderella clusters provide a quick, easy way to explore the kubernetes ecosystem. Create a cluster, deploy containers, and test different configurations. Cinderella clusters are automatically deleted when their times run out. Try Cinderella You won\u2019t have to do this every time you start a Cinderella cluster. Click on the link Click on \"Let's go!\" to get started. Next we need to import one (or more) SSH public keys so we can log in to the node running the cluster. If you have a GitHub account with SSH public keys, Soluble can just import those. That\u2019s what we\u2019ll do here: After clicking on Add , the keys are imported, and we\u2019re taken to the loading page. It takes about a minute for the cluster to spin up. When the cluster is ready, you\u2019ll receive a notification in the upper right corner. When you click Continue , you\u2019ll be taken to the Cinderella Clusters page: Next, we\u2019ll log in to the node running the cluster via SSH. To make this easy, we can copy the SSH command to log in to the node by clicking on the three vertical dots in the Actions column of the row with our Cinderella cluster: Next, open a terminal window, paste the command you copied at the prompt, and hit return. We\u2019ll be asked to confirm the SSH key of the remote host and will get a prompt that looks something like: Run the kubectl command and explore the cluster.","title":"Cinderella clusters"},{"location":"cli/","text":"CLI This is the command line interface (CLI) for interacting with Soluble Fusion. It can be used locally to run assessments and manage your account. It is used in your CI environment to run assessments and report the results to Soluble Fusion. Installation Mac OS The easiest way to install the CLI for MacOS is to use homebrew : brew install soluble-ai/soluble/soluble-cli To upgrade to the latest version: brew upgrade soluble-ai/soluble/soluble-cli Note: Due to Apple's notarization requirements, the brew installation builds the CLI from source. If this is a problem, you can download a precompiled binary from the GitHub Release page . However, you will have to approve it in Apple Preferences. We are working on distributing an Apple-notarized executable. Linux On Linux, run: curl https://raw.githubusercontent.com/soluble-ai/soluble-cli/master/linux-install.sh | sh This will install the latest version in the current directory. You will need to move it to an appropriate location on your PATH . Precompiled binaries are also available on the Github Release page . Windows Precompiled binaries are available on GitHub Release page . Please note that our testing on Windows is minimal. Please file a GitHub issue if your run into any problems. Build From Source It's possible to build from source. Assuming you have go installed: git checkout https://github.com/soluble-ai/soluble-cli.git ./hack/build.sh ./soluble version CLI Authentication Integrated Authentication The CLI uses an OAuth flow with your browser to generate an authentication token and configuration. $ soluble login This will open a browser window and walk you through the authentication flow. If you are running the CLI in an environment that does not have access to a browser (i.e. in SSH or interactive container sesssion) you run the auth process in headless mode, with: $ soluble login --headless This will give you a link to copy/paste into your browser. When you have completed the authentication flow, you will copy/paste the authentication code back to the CLI to complete the authentication flow. Manually Obtianing Access Token If you run into problems with the procedure above, you can obtian an access token manaully. Log in to the UI and go to Access Tokens . Generate an access token and then run: $ soluble auth set-access-token --access-token <your-access-token>","title":"CLI"},{"location":"cli/#cli","text":"This is the command line interface (CLI) for interacting with Soluble Fusion. It can be used locally to run assessments and manage your account. It is used in your CI environment to run assessments and report the results to Soluble Fusion.","title":"CLI"},{"location":"cli/#installation","text":"","title":"Installation"},{"location":"cli/#mac-os","text":"The easiest way to install the CLI for MacOS is to use homebrew : brew install soluble-ai/soluble/soluble-cli To upgrade to the latest version: brew upgrade soluble-ai/soluble/soluble-cli Note: Due to Apple's notarization requirements, the brew installation builds the CLI from source. If this is a problem, you can download a precompiled binary from the GitHub Release page . However, you will have to approve it in Apple Preferences. We are working on distributing an Apple-notarized executable.","title":"Mac OS"},{"location":"cli/#linux","text":"On Linux, run: curl https://raw.githubusercontent.com/soluble-ai/soluble-cli/master/linux-install.sh | sh This will install the latest version in the current directory. You will need to move it to an appropriate location on your PATH . Precompiled binaries are also available on the Github Release page .","title":"Linux"},{"location":"cli/#windows","text":"Precompiled binaries are available on GitHub Release page . Please note that our testing on Windows is minimal. Please file a GitHub issue if your run into any problems.","title":"Windows"},{"location":"cli/#build-from-source","text":"It's possible to build from source. Assuming you have go installed: git checkout https://github.com/soluble-ai/soluble-cli.git ./hack/build.sh ./soluble version","title":"Build From Source"},{"location":"cli/#cli-authentication","text":"","title":"CLI Authentication"},{"location":"cli/#integrated-authentication","text":"The CLI uses an OAuth flow with your browser to generate an authentication token and configuration. $ soluble login This will open a browser window and walk you through the authentication flow. If you are running the CLI in an environment that does not have access to a browser (i.e. in SSH or interactive container sesssion) you run the auth process in headless mode, with: $ soluble login --headless This will give you a link to copy/paste into your browser. When you have completed the authentication flow, you will copy/paste the authentication code back to the CLI to complete the authentication flow.","title":"Integrated Authentication"},{"location":"cli/#manually-obtianing-access-token","text":"If you run into problems with the procedure above, you can obtian an access token manaully. Log in to the UI and go to Access Tokens . Generate an access token and then run: $ soluble auth set-access-token --access-token <your-access-token>","title":"Manually Obtianing Access Token"},{"location":"cloud-posture/","text":"Cloud Posture Management Cloudsploit Cloudsploit is a great cloud security scanner from Aqua Security. Cloudsploit supports AWS, GCP, Azure and even Oracle cloud. Soluble has packaged clousdploit as a container image that can be run via Docker or Kubernetes. Run via Docker Assuming the soluble CLI is configured and you have AWS credentials in environment variables, run the following: docker run -it --rm \\ -e AWS_ACCESS_KEY_ID \\ -e AWS_SECRET_ACCESS_KEY \\ -e AWS_SESSION_TOKEN \\ -v ${HOME}/.soluble:/app/.soluble \\ gcr.io/soluble-repo/soluble-cloudsploit If your AWS configuration is in ~/.aws , the following will work as well: docker run -it --rm \\ -v ${HOME}/.aws:/app/.aws \\ -v ${HOME}/.soluble:/app/.soluble \\ gcr.io/soluble-repo/soluble-cloudsploit Cloudsploit can take a while to run. When it has completed, it will send the results to Soluble Fusion . Run via Kubernetes The following job template will run cloudsploit and send the results to Soluble Fusion. apiVersion: batch/v1 kind: Job metadata: generateName: cloudsploit- spec: template: spec: containers: - image: gcr.io/soluble-repo/soluble-cloudsploit:latest name: cloudsploit imagePullPolicy: Always env: - name: AWS_ACCESS_KEY_ID value: \"\" - name: AWS_SECRET_ACCESS_KEY value: \"\" - name: AWS_SESSION_TOKEN value: \"\" - name: SOLUBLE_API_TOKEN value: \"\" restartPolicy: Never The example above is meant for illustrative purposes only. You should consider using kubernetes secrets or use integrated IAM provide credentials to cloudsploit. Have Soluble Fusion Run It For You Soluble Fusion can execute cloudsploit for you if you add your AWS accounts.","title":"Cloud Posture Management"},{"location":"cloud-posture/#cloud-posture-management","text":"","title":"Cloud Posture Management"},{"location":"cloud-posture/#cloudsploit","text":"Cloudsploit is a great cloud security scanner from Aqua Security. Cloudsploit supports AWS, GCP, Azure and even Oracle cloud. Soluble has packaged clousdploit as a container image that can be run via Docker or Kubernetes.","title":"Cloudsploit"},{"location":"cloud-posture/#run-via-docker","text":"Assuming the soluble CLI is configured and you have AWS credentials in environment variables, run the following: docker run -it --rm \\ -e AWS_ACCESS_KEY_ID \\ -e AWS_SECRET_ACCESS_KEY \\ -e AWS_SESSION_TOKEN \\ -v ${HOME}/.soluble:/app/.soluble \\ gcr.io/soluble-repo/soluble-cloudsploit If your AWS configuration is in ~/.aws , the following will work as well: docker run -it --rm \\ -v ${HOME}/.aws:/app/.aws \\ -v ${HOME}/.soluble:/app/.soluble \\ gcr.io/soluble-repo/soluble-cloudsploit Cloudsploit can take a while to run. When it has completed, it will send the results to Soluble Fusion .","title":"Run via Docker"},{"location":"cloud-posture/#run-via-kubernetes","text":"The following job template will run cloudsploit and send the results to Soluble Fusion. apiVersion: batch/v1 kind: Job metadata: generateName: cloudsploit- spec: template: spec: containers: - image: gcr.io/soluble-repo/soluble-cloudsploit:latest name: cloudsploit imagePullPolicy: Always env: - name: AWS_ACCESS_KEY_ID value: \"\" - name: AWS_SECRET_ACCESS_KEY value: \"\" - name: AWS_SESSION_TOKEN value: \"\" - name: SOLUBLE_API_TOKEN value: \"\" restartPolicy: Never The example above is meant for illustrative purposes only. You should consider using kubernetes secrets or use integrated IAM provide credentials to cloudsploit.","title":"Run via Kubernetes"},{"location":"cloud-posture/#have-soluble-fusion-run-it-for-you","text":"Soluble Fusion can execute cloudsploit for you if you add your AWS accounts.","title":"Have Soluble Fusion Run It For You"},{"location":"getting-started/","text":"Getting Started Account Setup Sign In & Choose Identity Provider Open a browser to https://app.soluble.cloud/register Identity Provider Login Google If you are using Google, choose your google account: GitHub If you are using GitHub as your identity provider, authenticate with github. _ NOTE: We are NOT requesting access to your source code! _ Accept Terms of Service Account Created Automated Assessments - Zodiac Soluble Fusion provides an orchestration engine called Zodiac that runs in your environment and continuously scans your git repositories for security issues. Zodiac runs as a kubernetes operator. If you don't use kubernetes, Zodiac can be installed quite easily on Linux / Mac / Windows with k3s or k3d + Docker . Zodiac is stateless, so you won't lose any data if it is terminated or if the cluster is running in is terminated. Kubernetes Install Zodiac on Kubernetes If you plan to install zodiac into EKS, GKE, AKS or another kubernetes environment, skip ahead to install zodiac Install Zodiac on Linux via K3S If you have access to a Linux host, but don't have easy access to a kubernetes cluster, k3s.io is the easiest way to bootstrap a functioning single-node environment. Zodiac does not need to be accessible or publicly avaialble in any way. Just follow the instructions on the k3s.io site . Once your cluster is up and running, proceed to install zodiac . Install Zodiac on Docker via K3D If you don't have convenient access to a kubernetes cluster or Linux host, or if you just want to deploy zodiac in your local environment, we reccommend using k3d . K3D is a lightweight derivative of k3s that runs easily on top of Docker. We find that k3d is the simplest and fastest way to maintain a kubernetes cluster in your dev environment You can create and re-create an entire functional kubernetes cluster in just a few seconds. You can also use KIND or Docker Desktop's Kubernetes distribution , but k3d is much faster and easier to use. Installation instructions are here: https://k3d.io/#installation Once you have k3d itself installed, just run k3d cluster create and in a few seconds you'll have a functioning kubernetes cluster. Once your kubernetes cluster is working, continue to Install Zodiac Install Zodiac In the Soluble app, go to https://app.soluble.cloud/add-zodiac and click the downlod manifest button. This will download a kubernetes manifest bundle. You can review this if you like before applying it to your cluster. The manifest bundle contains: namespace named soluble in which everything will run serviceaccount for the zodiac pods, which has control over the soluble namespace secret named zodiac-config deployment for the zodiac operator service for the zodiac operator (not strictly required) a few other odds and ends to tie this all together Apply it to your cluster with kubectl apply -f zodiac.yaml : In a minute or two, you should see the Deployment up and ready. You can check with kubectl get deployments -n soluble : If zodiac can't communicate with the Soluble Fusion SaaS platform, it will enter a crash loop. Configure Zodiac Zodiac needs credentials to be able to communicate with your Git hosting provider. These are configured in Kubernetes because we don't want access to your source code. GitHub The easiest way to get credentials to Zodiac is to transfer them from GitHub's CLI. If you don't have the CLI installed, head to https://cli.github.com and check it out. Once you have it configured, verify that you can use it to access your repos with gh repo list and gh repo clone . The GitHub CLI stores the OAuth token in ${HOME}/.config/gh/hosts.yml . The format of the file is as follows. If you don't want to use the GitHub CLI to create it you can do so manually. github.com: user: <your-github-username> oauth_token: <oauth-token> Now that we have the file containing credentials, we can transfer it to kubernetes as a secret that Zodiac can read. Do this with: kubectl create secret generic git-providers --from-file=${HOME}/.config/gh/hosts.yml --namespace soluble secret/git-providers created Zodiac will notice this change and connect to the provider and start scanning your repos. GitLab Zodiac uses the GitHub file format for gitlab as well. Just add the following. Note that the provider attribute is optional if the hostname is githab.com . gitlab.com: user: <gitlab-username> token: <api-token> provider: gitlab Transfer the file into kubernetes with kubectl: $ kubectl create secret generic git-providers --from-file=hosts.yml --namespace soluble secret/git-providers created Zodiac will notice the change and start processing the repos that are available. Manual Assessments - CLI If you would prefer to run assessments manually, you can install the Soluble Fusion CLI on Linux, Mac or Windows. Please see the CLI installation documentation Once you have the CLI installed, you can run your first assessment .","title":"Getting Started"},{"location":"getting-started/#getting-started","text":"","title":"Getting Started"},{"location":"getting-started/#account-setup","text":"","title":"Account Setup"},{"location":"getting-started/#sign-in-choose-identity-provider","text":"Open a browser to https://app.soluble.cloud/register","title":"Sign In &amp; Choose Identity Provider"},{"location":"getting-started/#identity-provider-login","text":"","title":"Identity Provider Login"},{"location":"getting-started/#google","text":"If you are using Google, choose your google account:","title":"Google"},{"location":"getting-started/#github","text":"If you are using GitHub as your identity provider, authenticate with github. _ NOTE: We are NOT requesting access to your source code! _","title":"GitHub"},{"location":"getting-started/#accept-terms-of-service","text":"","title":"Accept Terms of Service"},{"location":"getting-started/#account-created","text":"","title":"Account Created"},{"location":"getting-started/#automated-assessments-zodiac","text":"Soluble Fusion provides an orchestration engine called Zodiac that runs in your environment and continuously scans your git repositories for security issues. Zodiac runs as a kubernetes operator. If you don't use kubernetes, Zodiac can be installed quite easily on Linux / Mac / Windows with k3s or k3d + Docker . Zodiac is stateless, so you won't lose any data if it is terminated or if the cluster is running in is terminated.","title":"Automated Assessments - Zodiac"},{"location":"getting-started/#kubernetes","text":"","title":"Kubernetes"},{"location":"getting-started/#install-zodiac-on-kubernetes","text":"If you plan to install zodiac into EKS, GKE, AKS or another kubernetes environment, skip ahead to install zodiac","title":"Install Zodiac on Kubernetes"},{"location":"getting-started/#install-zodiac-on-linux-via-k3s","text":"If you have access to a Linux host, but don't have easy access to a kubernetes cluster, k3s.io is the easiest way to bootstrap a functioning single-node environment. Zodiac does not need to be accessible or publicly avaialble in any way. Just follow the instructions on the k3s.io site . Once your cluster is up and running, proceed to install zodiac .","title":"Install Zodiac on Linux via K3S"},{"location":"getting-started/#install-zodiac-on-docker-via-k3d","text":"If you don't have convenient access to a kubernetes cluster or Linux host, or if you just want to deploy zodiac in your local environment, we reccommend using k3d . K3D is a lightweight derivative of k3s that runs easily on top of Docker. We find that k3d is the simplest and fastest way to maintain a kubernetes cluster in your dev environment You can create and re-create an entire functional kubernetes cluster in just a few seconds. You can also use KIND or Docker Desktop's Kubernetes distribution , but k3d is much faster and easier to use. Installation instructions are here: https://k3d.io/#installation Once you have k3d itself installed, just run k3d cluster create and in a few seconds you'll have a functioning kubernetes cluster. Once your kubernetes cluster is working, continue to Install Zodiac","title":"Install Zodiac on Docker via K3D"},{"location":"getting-started/#install-zodiac","text":"In the Soluble app, go to https://app.soluble.cloud/add-zodiac and click the downlod manifest button. This will download a kubernetes manifest bundle. You can review this if you like before applying it to your cluster. The manifest bundle contains: namespace named soluble in which everything will run serviceaccount for the zodiac pods, which has control over the soluble namespace secret named zodiac-config deployment for the zodiac operator service for the zodiac operator (not strictly required) a few other odds and ends to tie this all together Apply it to your cluster with kubectl apply -f zodiac.yaml : In a minute or two, you should see the Deployment up and ready. You can check with kubectl get deployments -n soluble : If zodiac can't communicate with the Soluble Fusion SaaS platform, it will enter a crash loop.","title":"Install Zodiac"},{"location":"getting-started/#configure-zodiac","text":"Zodiac needs credentials to be able to communicate with your Git hosting provider. These are configured in Kubernetes because we don't want access to your source code.","title":"Configure Zodiac"},{"location":"getting-started/#github_1","text":"The easiest way to get credentials to Zodiac is to transfer them from GitHub's CLI. If you don't have the CLI installed, head to https://cli.github.com and check it out. Once you have it configured, verify that you can use it to access your repos with gh repo list and gh repo clone . The GitHub CLI stores the OAuth token in ${HOME}/.config/gh/hosts.yml . The format of the file is as follows. If you don't want to use the GitHub CLI to create it you can do so manually. github.com: user: <your-github-username> oauth_token: <oauth-token> Now that we have the file containing credentials, we can transfer it to kubernetes as a secret that Zodiac can read. Do this with: kubectl create secret generic git-providers --from-file=${HOME}/.config/gh/hosts.yml --namespace soluble secret/git-providers created Zodiac will notice this change and connect to the provider and start scanning your repos.","title":"GitHub"},{"location":"getting-started/#gitlab","text":"Zodiac uses the GitHub file format for gitlab as well. Just add the following. Note that the provider attribute is optional if the hostname is githab.com . gitlab.com: user: <gitlab-username> token: <api-token> provider: gitlab Transfer the file into kubernetes with kubectl: $ kubectl create secret generic git-providers --from-file=hosts.yml --namespace soluble secret/git-providers created Zodiac will notice the change and start processing the repos that are available.","title":"GitLab"},{"location":"getting-started/#manual-assessments-cli","text":"If you would prefer to run assessments manually, you can install the Soluble Fusion CLI on Linux, Mac or Windows. Please see the CLI installation documentation Once you have the CLI installed, you can run your first assessment .","title":"Manual Assessments - CLI"},{"location":"git-repos/","text":"Repositories The Soluble Repositories view provides a clear, real-time view of the security posture of a repository. It's a single pane of glass to view results of all the static code analysis, image scanning and secrets scanning. Using the Soluble CLI inventory scanner, you get a list of what kinds of files the repository contains and their corresponding assessment results. The repository view also provides an easy way to view assessment reports for all the recent git branches, and it also allows you to view a diff between two commits of a repo. This allows you to make decisions based on the security posture of a repository.","title":"Repositories"},{"location":"git-repos/#repositories","text":"The Soluble Repositories view provides a clear, real-time view of the security posture of a repository. It's a single pane of glass to view results of all the static code analysis, image scanning and secrets scanning. Using the Soluble CLI inventory scanner, you get a list of what kinds of files the repository contains and their corresponding assessment results. The repository view also provides an easy way to view assessment reports for all the recent git branches, and it also allows you to view a diff between two commits of a repo. This allows you to make decisions based on the security posture of a repository.","title":"Repositories"},{"location":"integration/","text":"Integrations CI To install soluble in your CI environment, use the following command, which can be specified as a build step. curl -sL https://raw.githubusercontent.com/soluble-ai/soluble-cli/master/linux-install.sh | sh The CLI will be installed in the current directory with the execute bit set. You are welcome to move it somewhere else, but leaving it in the current directory works well with all of the modern CI platforms. The following is an example for Circle CI: version: 2.1 workflows: workflow: jobs: - build: context: my-env-context jobs: build: machine: image: ubuntu-1604:202010-01 steps: - checkout - run: \"curl -sL https://raw.githubusercontent.com/soluble-ai/soluble-cli/master/linux-install.sh | sh\" - run: \"soluble tf-scan tfsec --upload\" - run: \"soluble tf-scan checkov --upload\" - run: \"soluble secrets-scan --upload\" In order to communicate with the Soluble Fusion platform, the CLI needs an API token, which it expects to find in ~/.soluble/cli-config.json . The file will typically look something like this: { \"Profiles\": { \"default\": { \"APIServer\": \"https://api.soluble.cloud\", \"APIToken\": \"<SOLUBLE_API_TOKEN>\", \"TLSNoVerify\": false, \"Organization\": \"<SOLUBLE_ORG_ID>\", \"Email\": \"email@example.com\", \"DefaultClusterID\": \"\" } }, \"CurrentProfile\": \"default\", \"ModelLocations\": null } You have two choices to configure this: 1) Set SOLUBLE_API_TOKEN and SOLUBLE_ORG_ID as secrets in your CI platform. When you run the installation curl command above, ~/.soluble/cli-config.json will be configured automatically. In the example above, with Circle CI, these values were stored in a Context named my-env-context . If you are using GitHub Actions, you can use GitHub Secrets . There is no magic here. When the CLI is installed, it just uses these values to write its configuration file. or 2) If you want to handle this yourself, just make sure that cli-config.json is distributed and placed in ~/.soluble/cli-config.json using your preferred mechanism for this kind of thing. GitHub Actions We have some first-class support for GitHub Actions. Contact us for details. Circle CI, Jenkins, GitLabl, Buildkite, Tekton etc. The instructions above should be sufficient in most cases. The Soluble CLI will extract the CI platform-specific environment variables for relevant contextual data (Git commit, Git branch, CI pipeline name, etc) and send that metadata to the Fusion platform. If you are interested in a Circle CI Orb or other first-class support for CI integration, let us know. Source Control GitHub If you have the official GitHub CLI installed and configured on your machine, you can use its credentials to crawl all of the repos available to you. It will clone each of the available repos, identifiy where there IaC in those repos and send that metadata back to Soluble. soluble inventory github If you aren't using GitHub or don't have that capability available to you, you can run the inventory on a repo-by-repo basis by running the following from a cloned git repo: soluble inventory local Soluble GitHub App We provide a GitHub App that can be installed to your GitHub organization. This app allows the CLI to post status checks to GitHub PRs from CI. To in install the app: Log in to Soluble Go to https://github.com/apps/soluble-fusion and follow the instructions Once installed you can add soluble build update-pr to your CI job that performs the assessments. The CLI will obtain an ephemeral token, and post status checks to the GitHub pull request, if one exists. Note: This GitHub app does not have access to the code in your repositories. Slack We have a Slack app that can be used to push notifications and interact with the Soluble platform. This can be configured from the Integrations Page . AWS You can delegate IAM permissions with the Security Audit role in order to enable security configuration checks to be run against your AWS accounts. This can be configured from the Integrations Page","title":"Integrations"},{"location":"integration/#integrations","text":"","title":"Integrations"},{"location":"integration/#ci","text":"To install soluble in your CI environment, use the following command, which can be specified as a build step. curl -sL https://raw.githubusercontent.com/soluble-ai/soluble-cli/master/linux-install.sh | sh The CLI will be installed in the current directory with the execute bit set. You are welcome to move it somewhere else, but leaving it in the current directory works well with all of the modern CI platforms. The following is an example for Circle CI: version: 2.1 workflows: workflow: jobs: - build: context: my-env-context jobs: build: machine: image: ubuntu-1604:202010-01 steps: - checkout - run: \"curl -sL https://raw.githubusercontent.com/soluble-ai/soluble-cli/master/linux-install.sh | sh\" - run: \"soluble tf-scan tfsec --upload\" - run: \"soluble tf-scan checkov --upload\" - run: \"soluble secrets-scan --upload\" In order to communicate with the Soluble Fusion platform, the CLI needs an API token, which it expects to find in ~/.soluble/cli-config.json . The file will typically look something like this: { \"Profiles\": { \"default\": { \"APIServer\": \"https://api.soluble.cloud\", \"APIToken\": \"<SOLUBLE_API_TOKEN>\", \"TLSNoVerify\": false, \"Organization\": \"<SOLUBLE_ORG_ID>\", \"Email\": \"email@example.com\", \"DefaultClusterID\": \"\" } }, \"CurrentProfile\": \"default\", \"ModelLocations\": null } You have two choices to configure this: 1) Set SOLUBLE_API_TOKEN and SOLUBLE_ORG_ID as secrets in your CI platform. When you run the installation curl command above, ~/.soluble/cli-config.json will be configured automatically. In the example above, with Circle CI, these values were stored in a Context named my-env-context . If you are using GitHub Actions, you can use GitHub Secrets . There is no magic here. When the CLI is installed, it just uses these values to write its configuration file. or 2) If you want to handle this yourself, just make sure that cli-config.json is distributed and placed in ~/.soluble/cli-config.json using your preferred mechanism for this kind of thing.","title":"CI"},{"location":"integration/#github-actions","text":"We have some first-class support for GitHub Actions. Contact us for details.","title":"GitHub Actions"},{"location":"integration/#circle-ci-jenkins-gitlabl-buildkite-tekton-etc","text":"The instructions above should be sufficient in most cases. The Soluble CLI will extract the CI platform-specific environment variables for relevant contextual data (Git commit, Git branch, CI pipeline name, etc) and send that metadata to the Fusion platform. If you are interested in a Circle CI Orb or other first-class support for CI integration, let us know.","title":"Circle CI, Jenkins, GitLabl, Buildkite, Tekton etc."},{"location":"integration/#source-control","text":"","title":"Source Control"},{"location":"integration/#github","text":"If you have the official GitHub CLI installed and configured on your machine, you can use its credentials to crawl all of the repos available to you. It will clone each of the available repos, identifiy where there IaC in those repos and send that metadata back to Soluble. soluble inventory github If you aren't using GitHub or don't have that capability available to you, you can run the inventory on a repo-by-repo basis by running the following from a cloned git repo: soluble inventory local","title":"GitHub"},{"location":"integration/#soluble-github-app","text":"We provide a GitHub App that can be installed to your GitHub organization. This app allows the CLI to post status checks to GitHub PRs from CI. To in install the app: Log in to Soluble Go to https://github.com/apps/soluble-fusion and follow the instructions Once installed you can add soluble build update-pr to your CI job that performs the assessments. The CLI will obtain an ephemeral token, and post status checks to the GitHub pull request, if one exists. Note: This GitHub app does not have access to the code in your repositories.","title":"Soluble GitHub App"},{"location":"integration/#slack","text":"We have a Slack app that can be used to push notifications and interact with the Soluble platform. This can be configured from the Integrations Page .","title":"Slack"},{"location":"integration/#aws","text":"You can delegate IAM permissions with the Security Audit role in order to enable security configuration checks to be run against your AWS accounts. This can be configured from the Integrations Page","title":"AWS"},{"location":"pipelines/","text":"CI/CD Pipelines TBD","title":"CI/CD Pipelines"},{"location":"pipelines/#cicd-pipelines","text":"TBD","title":"CI/CD Pipelines"},{"location":"policies/","text":"Policies TBD Policy Management TBD Policy Suppression TBD","title":"Policies"},{"location":"policies/#policies","text":"TBD","title":"Policies"},{"location":"policies/#policy-management","text":"TBD","title":"Policy Management"},{"location":"policies/#policy-suppression","text":"TBD","title":"Policy Suppression"},{"location":"reference/","text":"Reference User Management Every user signed up for Soluble is tied to an organization. The first user from the organization sets up an account and has the ability to invite other people to his organization and can be assigned a role ( Owner , Write and Read ). Each invited user will be part of the organization they are invited to and they can also join a default organization of his own, so they can explore Soluble on their own. Invite user Under settings , press Users . Under the Users, press Invite . Provide the email address of the person whom you would like to invite to your organization and select a role from the dropdown. User roles explained below. Press Invite Roles Each user role is specific to that particular organization where it was applied. Owner - The user who created the initial account for the organization is the Owner. The Owner will have access to all the functionalities in that particular organization. They have the permission to grant / revoke permissions to the other users in the organization. Write - The user has the permissions for reading and writing any entities in the organization except for Users and Billing . Read - The user has permissions to read anything in the organization. Tokens Soluble Tokens are of two types: Access tokens - These are used for integrating Soluble with other party tools, such as Soluble CLI etc. Agent tokens - These are used by Soluble agents deployed in Kubernetes clusters. Generating Access token To generate an access token Under Settings , press Tokens . Under the access tokens, click on Generate Access Token . Agent Tokens All the agent tokens used by Soluble agents for kubernetes should be visible under the Agent tokens. Token Management Any user with the right permissions will be able to Disable or Revoke tokens. Organization Setup The owner of the organization can configure the Organization settings, like the display name of the organization, Login provider for organization. Organization ID is provided by the Soluble itself, and users are not able to edit them. Alerts Alerts provide an easy way to handle any issues identified by the Soluble Fusion platform. Alerts can be created for the failed findings from the assessments from a finding's action Soluble, when integrated with other third party platforms like Slack, Jira., provides an easy way to manage the security / configuration issues identified by Soluble, and automates Jira ticket creation with just a click of a button and Slack notification. Dashboard The Soluble dashboard provides an easy way for tracking, analyzing and displaying key information, which helps you to monitor the security / configuration issues in your infrastructure. Integrations Soluble provides an easy way to integrate with third party tools like Slack Jira AWS kubernetes To integrate with the above tools, click on the Integrations sidebar navigation. Slack Soluble can be integrated with just a click of a button. Configuring Slack with Soluble: Navigate to Integrations page and click on Slack Tile Configure button. Jira You need a Jira API token for this. Enter the following Jira details to finish the integration. URL - Domain of the Jira URL of your organization. Username - Jira username of the provided api token. Key - API token created above. Default Project - Provides the default project that can be used by Soluble to create Jira tickets for Soluble alerts. AWS Soluble can be integrated with AWS by running a simple script. Adding an AWS Account: Under the Integrations side menu, click on the AWS tile. Click on the Add Account button and copy the command provided and run it in your terminal. Repo Config Each git repository can have a configuration file named .soluble/config.yml in the root of the repository. This file is sent along with the asessments and can control how Soluble Fusion behaves. The following describes the configuration options available in this file: Ignore Files The ignore directive takes a list of strings, which are interpreted using gitignore syntax. Example: ignore: - \"test/**\" - \"some-other-file\" Note: Currently this directive only applies to assessments uploaded to Soluble Fusion. The ignore directive will not be applied to local CLI output. Suppress Findings The suppress directive takes a list of strings that are matched against the sid for a particular finding. suppress: - \"sid-1\" - \"sid-2\" Note that you can also suppress findings from the UI. Note: Currently this directive only applies to assessments uploaded to Soluble Fusion. The suppress directive will not be applied to local CLI output. Zodiac Config HTTP Proxy If your environment requires an HTTP proxy to reach the internet, you will want to add HTTP_PROXY and optionally NO_PROXY to the Zodiac kubernetes deployment manifest in the container spec section: env: - name: HTTP_PROXY value: http://mycompanyproxy.com:8080 - name: NO_PROXY value: internalhost.example.com,another.example.com For example: Git Providers GitHub Webhook Configuration You will want to configure a webhook for reach repo that you want Soluble Fusion to scan. Webhooks are configured for each repo here: https://github.com/ORG_NAME/REPO_NAME/settings/hooks Alternatively, you can use Organization Webhooks so that webhook events are sent for all of your repos, without having to configure each one. Organization webhooks are configured here: https://github.com/organizations/ORG_NAME/settings/hooks The fields to configure are: Payload URL - https://api.soluble.cloud/api/v1/github/webhook/SOUBLE_ORG_ID Replace SOLUBLE_ORG_ID with the 12-digit organization id, which you can find here: https://app.soluble.cloud/admin/org . The content type should be test to application/json . In the Secret field, you should enter a shared secret. You will configure the same secret here: https://app.demo.soluble.cloud/integrations/config/GitHub . The events to send are Pull and Pull Request . You can specify Just Send Me Everything if you like. GitLab Webhook Configuration GitLab webhooks should be configured similarly to GitHub above. The payload URL is: https://api.soluble.cloud/api/v1/gitlab/webhook/SOUBLE_ORG_ID Replace SOLUBLE_ORG_ID with the 12-digit organization id, which you can find here: https://app.soluble.cloud/admin/org .","title":"Reference"},{"location":"reference/#reference","text":"","title":"Reference"},{"location":"reference/#user-management","text":"Every user signed up for Soluble is tied to an organization. The first user from the organization sets up an account and has the ability to invite other people to his organization and can be assigned a role ( Owner , Write and Read ). Each invited user will be part of the organization they are invited to and they can also join a default organization of his own, so they can explore Soluble on their own.","title":"User Management"},{"location":"reference/#invite-user","text":"Under settings , press Users . Under the Users, press Invite . Provide the email address of the person whom you would like to invite to your organization and select a role from the dropdown. User roles explained below. Press Invite","title":"Invite user"},{"location":"reference/#roles","text":"Each user role is specific to that particular organization where it was applied. Owner - The user who created the initial account for the organization is the Owner. The Owner will have access to all the functionalities in that particular organization. They have the permission to grant / revoke permissions to the other users in the organization. Write - The user has the permissions for reading and writing any entities in the organization except for Users and Billing . Read - The user has permissions to read anything in the organization.","title":"Roles"},{"location":"reference/#tokens","text":"Soluble Tokens are of two types: Access tokens - These are used for integrating Soluble with other party tools, such as Soluble CLI etc. Agent tokens - These are used by Soluble agents deployed in Kubernetes clusters.","title":"Tokens"},{"location":"reference/#generating-access-token","text":"To generate an access token Under Settings , press Tokens . Under the access tokens, click on Generate Access Token .","title":"Generating Access token"},{"location":"reference/#agent-tokens","text":"All the agent tokens used by Soluble agents for kubernetes should be visible under the Agent tokens.","title":"Agent Tokens"},{"location":"reference/#token-management","text":"Any user with the right permissions will be able to Disable or Revoke tokens.","title":"Token Management"},{"location":"reference/#organization-setup","text":"The owner of the organization can configure the Organization settings, like the display name of the organization, Login provider for organization. Organization ID is provided by the Soluble itself, and users are not able to edit them.","title":"Organization Setup"},{"location":"reference/#alerts","text":"Alerts provide an easy way to handle any issues identified by the Soluble Fusion platform. Alerts can be created for the failed findings from the assessments from a finding's action Soluble, when integrated with other third party platforms like Slack, Jira., provides an easy way to manage the security / configuration issues identified by Soluble, and automates Jira ticket creation with just a click of a button and Slack notification.","title":"Alerts"},{"location":"reference/#dashboard","text":"The Soluble dashboard provides an easy way for tracking, analyzing and displaying key information, which helps you to monitor the security / configuration issues in your infrastructure.","title":"Dashboard"},{"location":"reference/#integrations","text":"Soluble provides an easy way to integrate with third party tools like Slack Jira AWS kubernetes To integrate with the above tools, click on the Integrations sidebar navigation.","title":"Integrations"},{"location":"reference/#slack","text":"Soluble can be integrated with just a click of a button. Configuring Slack with Soluble: Navigate to Integrations page and click on Slack Tile Configure button.","title":"Slack"},{"location":"reference/#jira","text":"You need a Jira API token for this. Enter the following Jira details to finish the integration. URL - Domain of the Jira URL of your organization. Username - Jira username of the provided api token. Key - API token created above. Default Project - Provides the default project that can be used by Soluble to create Jira tickets for Soluble alerts.","title":"Jira"},{"location":"reference/#aws","text":"Soluble can be integrated with AWS by running a simple script. Adding an AWS Account: Under the Integrations side menu, click on the AWS tile. Click on the Add Account button and copy the command provided and run it in your terminal.","title":"AWS"},{"location":"reference/#repo-config","text":"Each git repository can have a configuration file named .soluble/config.yml in the root of the repository. This file is sent along with the asessments and can control how Soluble Fusion behaves. The following describes the configuration options available in this file:","title":"Repo Config"},{"location":"reference/#ignore-files","text":"The ignore directive takes a list of strings, which are interpreted using gitignore syntax. Example: ignore: - \"test/**\" - \"some-other-file\" Note: Currently this directive only applies to assessments uploaded to Soluble Fusion. The ignore directive will not be applied to local CLI output.","title":"Ignore Files"},{"location":"reference/#suppress-findings","text":"The suppress directive takes a list of strings that are matched against the sid for a particular finding. suppress: - \"sid-1\" - \"sid-2\" Note that you can also suppress findings from the UI. Note: Currently this directive only applies to assessments uploaded to Soluble Fusion. The suppress directive will not be applied to local CLI output.","title":"Suppress Findings"},{"location":"reference/#zodiac-config","text":"","title":"Zodiac Config"},{"location":"reference/#http-proxy","text":"If your environment requires an HTTP proxy to reach the internet, you will want to add HTTP_PROXY and optionally NO_PROXY to the Zodiac kubernetes deployment manifest in the container spec section: env: - name: HTTP_PROXY value: http://mycompanyproxy.com:8080 - name: NO_PROXY value: internalhost.example.com,another.example.com For example:","title":"HTTP Proxy"},{"location":"reference/#git-providers","text":"","title":"Git Providers"},{"location":"reference/#github","text":"","title":"GitHub"},{"location":"reference/#webhook-configuration","text":"You will want to configure a webhook for reach repo that you want Soluble Fusion to scan. Webhooks are configured for each repo here: https://github.com/ORG_NAME/REPO_NAME/settings/hooks Alternatively, you can use Organization Webhooks so that webhook events are sent for all of your repos, without having to configure each one. Organization webhooks are configured here: https://github.com/organizations/ORG_NAME/settings/hooks The fields to configure are: Payload URL - https://api.soluble.cloud/api/v1/github/webhook/SOUBLE_ORG_ID Replace SOLUBLE_ORG_ID with the 12-digit organization id, which you can find here: https://app.soluble.cloud/admin/org . The content type should be test to application/json . In the Secret field, you should enter a shared secret. You will configure the same secret here: https://app.demo.soluble.cloud/integrations/config/GitHub . The events to send are Pull and Pull Request . You can specify Just Send Me Everything if you like.","title":"Webhook Configuration"},{"location":"reference/#gitlab","text":"","title":"GitLab"},{"location":"reference/#webhook-configuration_1","text":"GitLab webhooks should be configured similarly to GitHub above. The payload URL is: https://api.soluble.cloud/api/v1/gitlab/webhook/SOUBLE_ORG_ID Replace SOLUBLE_ORG_ID with the 12-digit organization id, which you can find here: https://app.soluble.cloud/admin/org .","title":"Webhook Configuration"}]}